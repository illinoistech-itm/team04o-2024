<!DOCTYPE html>
<html lang="en">

<head>
  <title>ScarletHawkReviews</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./css/login.css">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <meta name="google-signin-client_id"
    content="576961548022-g20uu1iqf1frsf20kbpq2u09osfe66g0.apps.googleusercontent.com">
</head>

<body>

  <header>
    <nav>
      <div class="centered">
        <div class="logo">ScarletHawkReviews</div>
        <div class="logo-img"><img src="./images/logo.png" alt="ScarletHawkReviews Logo"></div>
        <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="aboutus.html">About Us</a></li>
          <li><a href="help.html">Help</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <div class="login-page">
    <div class="form">
      <div class="login">
        <div class="login-header">
          <h3>LOGIN</h3>
          <p> Enter your account info to login.</p>
        </div>
      </div>
      <form class="mb-3" method="POST" action="/login">
        <div class="mb-3">
          <label for="email" class="form-label">Email address</label>
          <input type="text" class="form-control" id="email" placeholder="email" name="email">
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input type="password" class="form-control" id="password" placeholder="password" name="password">
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
        <a href="signup.html" class="mt-2 d-block">Don't have an account? Sign up</a>
      </form>
      <!-- Google Sign-In button -->
      <div class="container" id="signin-container">
        <div class="centered">
          <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
        </div>
      </div>
    </div>
    <script>
      function onSignIn(googleUser) {
        // Get profile information
        var profile = googleUser.getBasicProfile();
        console.log('ID: ' + profile.getId());
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail());

        // You can also use googleUser.getAuthResponse().id_token to get the ID token and send it to your server

        // Hide the sign-in button
        document.querySelector('.g-signin2').style.display = 'none';

        // Optionally display the user info
        const userInfoDiv = document.createElement('div');
        userInfoDiv.innerHTML = `Signed in as: <b>${profile.getName()}</b> (${profile.getEmail()})`;
        document.body.appendChild(userInfoDiv);

        // Add a sign-out button
        const signOutButton = document.createElement('button');
        signOutButton.innerText = 'Sign Out';
        signOutButton.onclick = function () {
          var auth2 = gapi.auth2.getAuthInstance();
          auth2.signOut().then(function () {
            console.log('User signed out.');
            document.querySelector('.g-signin2').style.display = 'block';
            userInfoDiv.remove();
            signOutButton.remove();
          });
        };
        document.body.appendChild(signOutButton);
      }
    </script>
</body>

</html>