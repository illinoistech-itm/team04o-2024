<!DOCTYPE html>
<html lang="en">

<head>
  <title>ScarletHawkReviews</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./css/login.css">
  <!-- Google Sign-In button -->
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <meta name="google-signin-client_id" content="576961548022-g20uu1iqf1frsf20kbpq2u09osfe66g0.apps.googleusercontent.com">
</head>

<body>
  <header>
    <nav>
      <div class="centered">
        <div class="logo">ScarletHawkReviews</div>
        <div class="logo-img"><img src="./images/logo.png" alt="ScarletHawkReviews Logo"></div>
        <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="aboutus.html">About Us</a></li>
          <li><a href="help.html">Help</a></li>
        </ul>
      </div>
    </nav>
  </header>
  <div class="login-page">
    <div class="form">
      <div class="login-header">
        <h3>LOGIN</h3>
        <p>Enter your account info to login.</p>
      </div>
      <form class="mb-3" method="POST" action="/login">
        <div class="mb-3">
          <label for="email" class="form-label">Email address</label>
          <input type="text" class="form-control" id="email" placeholder="email" name="email">
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input type="password" class="form-control" id="password" placeholder="password" name="password">
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
        <a href="signup.html" class="mt-2 d-block">Don't have an account? Sign up</a>
        <div class="container" id="signin-container">
          <div class="centered">
            <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <script>
    function onSignIn(googleUser) {
      try {
        console.log('Google sign-in was successful.');
        var profile = googleUser.getBasicProfile();
        console.log('ID: ', profile.getId());
        console.log('Name: ', profile.getName());
        console.log('Image URL: ', profile.getImageUrl());
        console.log('Email: ', profile.getEmail());

        var confirmationMessage = `<p>Welcome, ${profile.getName()}! You have successfully signed in.</p>`;
        document.body.insertAdjacentHTML('beforeend', confirmationMessage);

        var signInButtonContainer = document.getElementById("signin-container");
        if (signInButtonContainer) {
          signInButtonContainer.style.display = 'none';
        }

        console.log('User is being redirected.');
        window.location.href = 'index.html';
      } catch (error) {
        console.error("Error during Google sign-in process:", error);
      }
    }
  </script>
</body>

</html>